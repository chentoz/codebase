<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Extrude polygons for 3D indoor mapping</title>
		<meta
			name="viewport"
			content="initial-scale=1,maximum-scale=1,user-scalable=no"
		/>
		<script src="https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.js"></script>
		<link
			href="https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.css"
			rel="stylesheet"
		/>
		<style>
			body {
				margin: 0;
				padding: 0;
			}
			#map {
				position: absolute;
				top: 0;
				bottom: 0;
				width: 100%;
			}
		</style>
	</head>
	<body>
		<div id="map"></div>
		<script>
			mapboxgl.accessToken =
				//"pk.eyJ1IjoieWNhbyIsImEiOiJjajRydGZ1NHcxOGdhMzNwbDgyOTQzejZjIn0.uyBiXfDcnzCT7ui6nsEcZg"
				"pk.eyJ1IjoieWNhbyIsImEiOiJjajRydGZ1NHcxOGdhMzNwbDgyOTQzejZjIn0.uyBiXfDcnzCT7ui6nsEcZg"

			var map = new mapboxgl.Map({
				container: "map",
				//style: "mapbox://styles/ycao/ckd41m6nx0mer1ip9datiljsa",
				style: "mapbox://styles/mapbox/streets-v11",
				//center: [119.617, 31.86],
				center: [119.958, 31.69],
				zoom: 15.99,
				pitch: 40,
				bearing: 20,
				antialias: true,
			})

			let data4 = {
				type: "FeatureCollection",
				name: "zones",
				crs: {
					type: "name",
					properties: { name: "urn:ogc:def:crs:OGC:1.3:CRS84" },
				},
				features: [
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Walls",
							height: 100,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.959517987425585, 31.680667341046412],
									[119.959519882567633, 31.680427041900625],
									[119.95953125342011, 31.6804262355266],
									[119.959524620422826, 31.680656051838721],
									[119.959817419873801, 31.680659277326772],
									[119.959817419873801, 31.680420590908266],
									[119.959830685868354, 31.68041817178602],
									[119.95982973829733, 31.68053106409041],
									[119.959831633439407, 31.680666534674486],
									[119.959831633439407, 31.680668953790256],
									[119.959831633439407, 31.680666534674486],
									[119.959517987425585, 31.680667341046412],
								],
							],
						},
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Floor1",
							height: 0,
							base_height: 0,
							color: "blue",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.959524620422854, 31.680656455024732],
									[119.959531727205629, 31.680426638713609],
									[119.959818367444868, 31.680420187721229],
									[119.959817893659334, 31.680659277326772],
									[119.959524620422854, 31.680656455024732],
								],
							],
						},
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Floor1",
							height: 20,
							base_height: 21,
							color: "yellow",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.959524620422854, 31.680656455024732],
									[119.959531727205629, 31.680426638713609],
									[119.959818367444868, 31.680420187721229],
									[119.959817893659334, 31.680659277326772],
									[119.959524620422854, 31.680656455024732],
								],
							],
						},
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Floor1",
							height: 40,
							base_height: 41,
							color: "green",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.959524620422854, 31.680656455024732],
									[119.959531727205629, 31.680426638713609],
									[119.959818367444868, 31.680420187721229],
									[119.959817893659334, 31.680659277326772],
									[119.959524620422854, 31.680656455024732],
								],
							],
						},
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Floor1",
							height: 60,
							base_height: 61,
							color: "red",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.959524620422854, 31.680656455024732],
									[119.959531727205629, 31.680426638713609],
									[119.959818367444868, 31.680420187721229],
									[119.959817893659334, 31.680659277326772],
									[119.959524620422854, 31.680656455024732],
								],
							],
						},
					},
				],
			}

			let data3 = {
				type: "FeatureCollection",
				name: "kejiaocheng",
				crs: {
					type: "name",
					properties: { name: "urn:ogc:def:crs:OGC:1.3:CRS84" },
				},
				features: [
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "1nd Floor",
							height: 0,
							base_height: 0,
							color: "orange",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.958056359098279, 31.680987066965674],
									[119.958056359098279, 31.680822567512955],
									[119.958884536186133, 31.680825792995218],
									[119.958884536186133, 31.68051533981339],
									[119.958066782379689, 31.680511307947054],
									[119.958067729950685, 31.680349226775469],
									[119.958879798330941, 31.680346001276643],
									[119.95886463719431, 31.680391158249982],
									[119.958983083574182, 31.680395996495818],
									[119.958993506855592, 31.680322616406823],
									[119.959117638661681, 31.680321003656967],
									[119.959116217305123, 31.681008838930204],
									[119.958941864233978, 31.681013677143856],
									[119.958943759376069, 31.680947554868805],
									[119.95886984883505, 31.680922557411101],
									[119.958867953692973, 31.680998356133102],
									[119.958055885312746, 31.68098706696566],
									[119.958056359098279, 31.680987066965674],
								],
							],
						},
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "2nd Floor",
							height: 0,
							base_height: 0,
							color: "blue",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.958056359098279, 31.680987066965674],
									[119.958056359098279, 31.680822567512955],
									[119.958884536186133, 31.680825792995218],
									[119.958884536186133, 31.68051533981339],
									[119.958066782379689, 31.680511307947054],
									[119.958067729950685, 31.680349226775469],
									[119.958879798330941, 31.680346001276643],
									[119.95886463719431, 31.680391158249982],
									[119.958983083574182, 31.680395996495818],
									[119.958993506855592, 31.680322616406823],
									[119.959117638661681, 31.680321003656967],
									[119.959116217305123, 31.681008838930204],
									[119.958941864233978, 31.681013677143856],
									[119.958943759376069, 31.680947554868805],
									[119.95886984883505, 31.680922557411101],
									[119.958867953692973, 31.680998356133102],
									[119.958055885312746, 31.68098706696566],
									[119.958056359098279, 31.680987066965674],
								],
							],
						},
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Walls",
							height: 40,
							base_height: 10,
							color: "grey",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[119.958046910237684, 31.680815160708516],
									[119.958876727395406, 31.680818237674135],
									[119.958873111634347, 31.680525925484762],
									[119.958057757520791, 31.680522848509451],
									[119.958055949640283, 31.680341306785689],
									[119.958887574678485, 31.680338229804264],
									[119.958878535275915, 31.680384384514976],
									[119.958972545062849, 31.680388999984789],
									[119.958983392345942, 31.680318229422493],
									[119.959126214906874, 31.680313613949167],
									[119.959128022787382, 31.681019778700243],
									[119.958925540169389, 31.681021317179681],
									[119.958925540169389, 31.680950547099382],
									[119.958876727395406, 31.680936700773017],
									[119.958878535275915, 31.681007470863864],
									[119.958045102357161, 31.681002855424801],
									[119.958046910237684, 31.680815160708516],
								],
								[
									[119.958054463956216, 31.680988679703969],
									[119.958056359098308, 31.680821761142386],
									[119.958884536186204, 31.68082418025412],
									[119.95888358861518, 31.680514533440149],
									[119.958065834808707, 31.680512114320351],
									[119.958064887237654, 31.680349226775476],
									[119.958878850759959, 31.680346001276657],
									[119.958865584765419, 31.680390351875658],
									[119.958981188432148, 31.680395996495832],
									[119.958991611713557, 31.680321810031909],
									[119.959115743519646, 31.68031939090708],
									[119.959117638661695, 31.681007226192289],
									[119.958941390448487, 31.68101206440603],
									[119.958941390448487, 31.680944329390805],
									[119.958869375049559, 31.680920138301961],
									[119.958869375049559, 31.680999162502172],
									[119.95807152023491, 31.680987873334839],
									[119.958058254240356, 31.680986260596534],
									[119.958054463956216, 31.680988679703969],
								],
							],
						},
					},
				],
			}

			let data2 = {
				features: [
					/* 					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Bird Exhibit",
							height: 0,
							base_height: 0,
							color: "orange",
						},
						geometry: {
							coordinates: [
								[
									[119.618312, 31.866282],
									[119.61832, 31.866674],
									[119.618087, 31.866676],
									[119.618087, 31.866661],
									[119.617423, 31.86667],
									[119.617416, 31.8663],
									[119.618312, 31.866282],
								],
							],
							type: "Polygon",
						},
						id: "06e8fa0b3f851e3ae0e1da5fc17e111e",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Bird Exhibit",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.617808, 31.866266],
									[119.617806, 31.866293],
									[119.617415, 31.866298],
									[119.617424, 31.866671],
									[119.617382, 31.866669],
									[119.617371, 31.866274],
									[119.617808, 31.866266],
								],
							],
							type: "Polygon",
						},
						id: "08a10ab2bf15c4d14669b588062f7f08",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "East Hallway",
							base_height: 0,
							height: 0,
							color: "indigo",
						},
						geometry: {
							coordinates: [
								[
									[119.616704, 31.866141],
									[119.616707, 31.866338],
									[119.61572, 31.866355],
									[119.61572, 31.866148],
									[119.616704, 31.866141],
								],
							],
							type: "Polygon",
						},
						id: "09ead44537d94ece576c7bc001c33e53",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "East Entrance",
							base_height: 0,
							height: 0,
							color: "violet",
						},
						geometry: {
							coordinates: [
								[
									[119.61544, 31.866149],
									[119.615449, 31.866358],
									[119.615721, 31.866355],
									[119.61572, 31.866143],
									[119.61544, 31.866149],
								],
							],
							type: "Polygon",
						},
						id: "12251ebf764b36cf3b8c5ad42e2deb29",
					},*/
					{
						type: "Feature",
						properties: {
							height: 0,
							base_height: 0,
							level: 1,
							name: "Under the Earth",
							color: "red",
						},
						geometry: {
							coordinates: [
								[
									[119.616701, 31.865816],
									[119.616705, 31.866115],
									[119.615712, 31.866125],
									[119.615706, 31.865802],
									[119.615936, 31.865801],
									[119.615938, 31.865824],
									[119.616701, 31.865816],
								],
							],
							type: "Polygon",
						},
						id: "1ce4f8c186a40b9927006644e27bfd69",
					},
					/*
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Atrium",
							base_height: 0,
							height: 0,
							color: "yellow",
						},
						geometry: {
							coordinates: [
								[
									[119.617365, 31.865799],
									[119.6167, 31.865815],
									[119.616718, 31.866672],
									[119.617384, 31.86667],
									[119.617365, 31.865799],
								],
							],
							type: "Polygon",
						},
						id: "369f5d8865e677120b7576b1de6082eb",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Ancient Egypt",
							height: 0,
							base_height: 0,
							color: "blue",
						},
						geometry: {
							coordinates: [
								[
									[119.61807, 31.865761],
									[119.618299, 31.865758],
									[119.618307, 31.866139],
									[119.617407, 31.86615],
									[119.617399, 31.865799],
									[119.61807, 31.865789],
									[119.61807, 31.865761],
								],
							],
							type: "Polygon",
						},
						id: "3e9f198afe6d7dff01ac81c6eaa511fb",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "West Arch",
							height: 40,
							base_height: 30,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.617424, 31.86667],
									[119.617384, 31.86667],
									[119.617365, 31.865799],
									[119.617405, 31.865799],
									[119.617424, 31.86667],
								],
							],
							type: "Polygon",
						},
						id: "402706f28b793d27c78d9615fff747f2",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Bird Exhibit",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.618312, 31.866283],
									[119.61797, 31.866288],
									[119.617972, 31.866265],
									[119.618312, 31.866259],
									[119.618312, 31.866283],
								],
							],
							type: "Polygon",
						},
						id: "43e1e2fc8399dee075ad59764f2a2878",
					},
					{
						type: "Feature",
						properties: {
							name: "Arch",
							level: 1,
							color: "grey",
							base_height: 30,
							height: 40,
						},
						geometry: {
							coordinates: [
								[
									[119.617971, 31.866291],
									[119.617973, 31.866265],
									[119.617805, 31.866267],
									[119.617806, 31.866294],
									[119.617971, 31.866291],
								],
							],
							type: "Polygon",
						},
						id: "4528ad9b9264cbec65bb2e55ac0012c1",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							color: "grey",
							base_height: 30,
							height: 40,
							name: "Arch",
						},
						geometry: {
							coordinates: [
								[
									[119.617979, 31.866167],
									[119.617797, 31.866168],
									[119.617799, 31.866145],
									[119.617976, 31.866144],
									[119.617979, 31.866167],
								],
							],
							type: "Polygon",
						},
						id: "4be6817c3b595042c8d971eebd0c4fd3",
					},
					{
						type: "Feature",
						properties: {
							name: "Kids Zone",
							level: 1,
							base_height: 0,
							height: 0,
							color: "green",
						},
						geometry: {
							coordinates: [
								[
									[119.616718, 31.866675],
									[119.616709, 31.866371],
									[119.615725, 31.866381],
									[119.615732, 31.866711],
									[119.61596, 31.866711],
									[119.61596, 31.866688],
									[119.616718, 31.866675],
								],
							],
							type: "Polygon",
						},
						id: "5775eba03674ea1cb3550ffb38321432",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							color: "grey",
							name: "Arch",
							height: 40,
							base_height: 30,
						},
						geometry: {
							coordinates: [
								[
									[119.616286, 31.866119],
									[119.616286, 31.866144],
									[119.616089, 31.866149],
									[119.616086, 31.86612],
									[119.616286, 31.866119],
								],
							],
							type: "Polygon",
						},
						id: "598832b1512dc9facc855c5367251531",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Arch",
							color: "grey",
							height: 40,
							base_height: 30,
						},
						geometry: {
							coordinates: [
								[
									[119.616287, 31.866343],
									[119.616288, 31.866374],
									[119.616076, 31.866378],
									[119.616077, 31.866347],
									[119.616287, 31.866343],
								],
							],
							type: "Polygon",
						},
						id: "59ed13d4411ff5f88714d9af539788d2",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							color: "grey",
							name: "center_arch",
							base_height: 30,
							height: 40,
						},
						geometry: {
							coordinates: [
								[
									[119.61737, 31.866198],
									[119.617372, 31.86624],
									[119.616708, 31.866243],
									[119.616708, 31.866203],
									[119.61737, 31.866198],
								],
							],
							type: "Polygon",
						},
						id: "67f8952a18dfe21ee0744a3e86bc41d8",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Kids Zone",
							height: 0,
							base_height: 40,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.615719, 31.866354],
									[119.615718, 31.866381],
									[119.616077, 31.866378],
									[119.616077, 31.866347],
									[119.615719, 31.866354],
								],
							],
							type: "Polygon",
						},
						id: "6bb2c92386bcf4678113d6b3e400ae3b",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Under the Earth",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.616089, 31.866149],
									[119.616089, 31.866119],
									[119.615711, 31.866124],
									[119.615713, 31.866147],
									[119.616089, 31.866149],
								],
							],
							type: "Polygon",
						},
						id: "844c87987089df6b9db3923f6a00e4d6",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Under the Earth",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.616707, 31.866115],
									[119.616286, 31.866119],
									[119.616285, 31.866144],
									[119.616705, 31.866141],
									[119.616707, 31.866115],
								],
							],
							type: "Polygon",
						},
						id: "85547a1ecdbd2ca1fdc6324aea3c6b70",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "North Entrance",
							height: 0,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.617386, 31.86667],
									[119.617388, 31.866786],
									[119.617228, 31.866786],
									[119.617226, 31.866848],
									[119.616867, 31.866849],
									[119.616868, 31.866791],
									[119.616718, 31.866791],
									[119.616718, 31.866672],
									[119.617386, 31.86667],
								],
							],
							type: "Polygon",
						},
						id: "91ab1ee01729c33568c7b57eb258e699",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Ancient Egypt",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.617394, 31.865799],
									[119.617405, 31.86615],
									[119.617802, 31.866147],
									[119.6178, 31.866167],
									[119.617369, 31.866172],
									[119.617364, 31.865799],
									[119.617394, 31.865799],
								],
							],
							type: "Polygon",
						},
						id: "943171d55d207024791e15294def7e8f",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Ancient Egypt",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.617976, 31.866166],
									[119.617976, 31.866143],
									[119.618309, 31.866139],
									[119.618309, 31.866161],
									[119.617976, 31.866166],
								],
							],
							type: "Polygon",
						},
						id: "a37230898905988cab9b72927dc99258",
					},
					{
						type: "Feature",
						properties: {
							name: "West Hallway",
							level: 1,
							base_height: 0,
							height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.618309, 31.866161],
									[119.618312, 31.86626],
									[119.61737, 31.866272],
									[119.61737, 31.86617],
									[119.618309, 31.866161],
								],
							],
							type: "Polygon",
						},
						id: "c7cc79da8711d746985f23a9b22c1d5e",
					},
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Kids Zone",
							height: 40,
							base_height: 0,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.616286, 31.866343],
									[119.616286, 31.866374],
									[119.61671, 31.866371],
									[119.616708, 31.866338],
									[119.616286, 31.866343],
								],
							],
							type: "Polygon",
						},
						id: "cfbf2aee6a73a45c12e7fc7432d6009e",
					},*/
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "South Entrance",
							height: 0,
							base_height: 0,
							color: "teal",
						},
						geometry: {
							coordinates: [
								[
									[119.617359, 31.865801],
									[119.617355, 31.865674],
									[119.617221, 31.865677],
									[119.617219, 31.86559],
									[119.616824, 31.865595],
									[119.616826, 31.86568],
									[119.616695, 31.865683],
									[119.6167, 31.865813],
									[119.617359, 31.865801],
								],
							],
							type: "Polygon",
						},
						id: "d71ab89467076ad023161c37f4ff0d5f",
					},
					/*
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "East Arch",
							height: 40,
							base_height: 30,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.616688, 31.866675],
									[119.616716, 31.866675],
									[119.616699, 31.865814],
									[119.616665, 31.865814],
									[119.616688, 31.866675],
								],
							],
							type: "Polygon",
						},
						id: "dd2baec57e4079eb65dcae5be495da62",
					},
					/*
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "outer-walls",
							base_height: 0,
							height: 40,
							color: "grey",
						},
						geometry: {
							coordinates: [
								[
									[119.618087, 31.86666],
									[119.618087, 31.866674],
									[119.618319, 31.866674],
									[119.618298, 31.865757],
									[119.618326, 31.865756],
									[119.618347, 31.866693],
									[119.618068, 31.866696],
									[119.618067, 31.866675],
									[119.61741, 31.866684],
									[119.617416, 31.866802],
									[119.617247, 31.866803],
									[119.617246, 31.866866],
									[119.616846, 31.866868],
									[119.616848, 31.866807],
									[119.61669, 31.866811],
									[119.616693, 31.866693],
									[119.615992, 31.866701],
									[119.615992, 31.866729],
									[119.615703, 31.866733],
									[119.615689, 31.866377],
									[119.615412, 31.866382],
									[119.615411, 31.866122],
									[119.615689, 31.866119],
									[119.615682, 31.865781],
									[119.615966, 31.865779],
									[119.615969, 31.865798],
									[119.616669, 31.865794],
									[119.616663, 31.865662],
									[119.6168, 31.865661],
									[119.616796, 31.865571],
									[119.61726, 31.865559],
									[119.617258, 31.865654],
									[119.617388, 31.865652],
									[119.617395, 31.865778],
									[119.618045, 31.865773],
									[119.618044, 31.865742],
									[119.618325, 31.865739],
									[119.618326, 31.865758],
									[119.61807, 31.865761],
									[119.61807, 31.865789],
									[119.617356, 31.8658],
									[119.617356, 31.865672],
									[119.617218, 31.865677],
									[119.617215, 31.86559],
									[119.616822, 31.865595],
									[119.616827, 31.86568],
									[119.616694, 31.865681],
									[119.616697, 31.865813],
									[119.615939, 31.865824],
									[119.615937, 31.8658],
									[119.615706, 31.865802],
									[119.615713, 31.866143],
									[119.615441, 31.86615],
									[119.61545, 31.866357],
									[119.615724, 31.866353],
									[119.615733, 31.866712],
									[119.615959, 31.86671],
									[119.615959, 31.866688],
									[119.616719, 31.866672],
									[119.61672, 31.866791],
									[119.616869, 31.86679],
									[119.616868, 31.86685],
									[119.617223, 31.866847],
									[119.617227, 31.866786],
									[119.617387, 31.866785],
									[119.617383, 31.86667],
									[119.618087, 31.86666],
								],
							],
							type: "Polygon",
						},
						id: "ef6512f46485e27963c248bcc945c3db",
					},*/
				],
				type: "FeatureCollection",
			}
			let data = {
				type: "FeatureCollection",
				features: [
					{
						type: "Feature",
						properties: {
							level: 1,
							name: "Bird Exhibit",
							height: 100,
							base_height: 20,
							color: "blue",
						},
						geometry: {
							type: "Polygon",
							coordinates: [
								[
									[
										[119.959796599601319, 31.680606888360987],
										[119.959715244978042, 31.681280742909426],
										[119.960745736873236, 31.681331512574523],
										[119.960762007797911, 31.680731505666646],
										[119.959796599601319, 31.680606888360987],
									],
								],
							],
						},
						id: "06e8fa0b3f851e3ae0e1da5fc17e111e",
					},
				],
			}

			map.on("load", function () {
				map.addSource("floorplan", {
					// GeoJSON Data source used in vector tiles, documented at
					// https://gist.github.com/ryanbaumann/a7d970386ce59d11c16278b90dde094d
					type: "geojson",
					data:
						//'https://docs.mapbox.com/mapbox-gl-js/assets/indoor-3d-map.geojson'
						data4,
				})
				map.addLayer({
					id: "room-extrusion",
					type: "fill-extrusion",
					source: "floorplan",
					paint: {
						// See the Mapbox Style Specification for details on data expressions.
						// https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions

						// Get the fill-extrusion-color from the source 'color' property.
						"fill-extrusion-color": ["get", "color"],

						// Get fill-extrusion-height from the source 'height' property.
						"fill-extrusion-height": ["get", "height"],

						// Get fill-extrusion-base from the source 'base_height' property.
						"fill-extrusion-base": ["get", "base_height"],

						// Make extrusions slightly opaque for see through indoor walls.
						"fill-extrusion-opacity": 0.5,
					},
				})
			})
		</script>
	</body>
</html>
